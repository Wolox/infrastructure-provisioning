# Infrastructure Provisioning

## Usage

```
git clone git@github.com:Wolox/infrastructure-provisioning.git
chmod a+x cli/aws.rb
cd cli
./aws.rb create_backend project-name --profile your-aws-profile --services rds
```

This will create the following services in AWS:

1. RDS instance
2. ElasticBeanstalk environment
3. Security group allowing access to RDS from ElasticBeanstalk

## Allowed parameters

You can run the script with any of these parameters:

| Parameter                        | Required      | Default Value | Description      |
| -------------                    |:-------------:| :-----:       |:-------------:|
| profile                          | true          | -              | The profile used to connect to AWS|
| services                         | true          | -              | Comma separated string of services created by this script. Can be any of rds and redis |
| region                           | false         |us-east-1       | AWS region |
| application_name                 | false         |project-name    | The name of your application |
| environment_name                 | false         |stage           | Environment. Example: stage, prod, dev |
| cname_prefix                     | false         |application_name-environment_name           | Prefix used by ElasticBeanstalk |
| solution_stack_name              | false         |64bit Amazon Linux 2016.09 v2.3.1 running Ruby 2.3 (Puma)           | |
| allocated_storage                | false         |30           | RDS allocated storage |
| db_instance_identifier           | false         |application_name-environment_name           | DB identifier |
| engine                           | false         |postgres           | |
| master_username                  | false         |application_name_environment_name           | |
| master_user_password             | false         |autogenerated           | |
| db_name                          | false         |application_name           | Database name |

If you are not finding some value here, you can take a look to `core/parameters.rb` to see the default values used to create the infrastructure.
